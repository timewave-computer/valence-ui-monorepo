---
title: "Covenants: Protocol-to-Protocol Deals"
date: 2024-06-20 11:32:00 -0400
author: test
description: Consectetur enim adipisicing excepteur consectetur
---

![Covenant Header](/img/blog/covenant-bw.png)

# Introducing Covenants
 
Valence’s Covenant system is a way for protocols—such as blockchains, dApps, rollups, and DAOs—to transact with other protocols in a programmatic, trust-minimized way. This post will explore the roadblocks inhibiting protocol-to-protocol deals, how protocols can benefit from using the Covenant system, and the kinds of liquidity sharing deal structures that the Covenant system unlocks.

Informal audited the v1 Covenant library and Oak Security has now completed an audit of the v2 Covenant system, alongside our extensive suite of end-to-end testing. At the time of writing two Covenants have been deployed to production, Nolus–Neutron and Stargaze–Neutron, with more to be announced in the coming weeks. The Covenant system is now production-ready for any protocol with Interchain Accounts or Polytone to initiate a cross-chain liquidity deal.

# Roadblocks to closing protocol-to-protocol deals

Without the Covenant system, the only way for one protocol to transact with another is to use a trusted multisig. These multisigs cause [issues on numerous fronts](https://x.com/TimewaveLabs/status/1765437257492922808), including deal friction, administrative risk, and operational overhead. Mostly importantly, multisigs are unable to respond to events in realtime, which precludes the introduction of automated contractual terms and limits the possibilities for algorithmic monetary policies.

Multisigs for protocol-to-protocol deals are at best only a temporary stopgap. Covenants are the long-term solution because they eliminate the need for trusted third parties.

# The benefits of protocol-to-protocol deals

While protocols can use the Covenant system for simple transactions, such as a token swap or OTC deal, the key feature of the Covenant system is the ability for protocols to lend protocol-owned liquidity (POL) to other protocols. Protocol-to-protocol liquidity lending has a number of important benefits:

**1. Increases amount of liquidity:** Getting liquidity from protocols is a net-new source of liquidity. More liquidity means more trade volume can occur with less price impact, which makes it easier for larger investors to participate. Liquidity begets liquidity.

**2. Increases quality of liquidity:** Sourcing liquidity from other protocols can also increase the quality of liquidity. Off-chain actors often have incentives that are misaligned with those of the protocol, whereas protocol counterparties with a stake in the ecosystem have greater alignment to ensure the collective ecosystem thrives.

**3. Enables alliance formation:** If two protocols have competing products, they are likely to engage in zero-sum, or potentially negative-sum, activity. A liquidity sharing deal between protocols can reduce the incentive to engage in destructive activity and instead enable both parties to focus on positive-sum activity.

**4. Creates an environment for innovation:** Protocol-to-protocol deals are cutting edge. By closing deals with other protocols, protocols demonstrate sophistication, technical capability, and ecosystem alignment, which can help the protocol attract talent, capital, and integrations.
 
# Structuring protocol-to-protocol liquidity deals

The Covenant system provides various ways to structure protocol-to-protocol liquidity deals, including the following:

## Unilateral POL

A protocol may wish to deepen liquidity between its native token and the liquid staked versions of its token. To do so, the protocol could convert a portion of its native token to a liquid staked version of that token and pair that liquid staked version with the native token on a DEX.

This unilateral POL is what the Cosmos Hub is doing with proposition [800](https://wallet.keplr.app/chains/cosmos-hub/proposals/800). It allocated 450,000 ATOM to strengthen the ATOM:stATOM pool on Astroport by converting about half of the ATOM into stATOM and pairing the stATOM with ATOM on Astroport. The Hub further deepened liquid staked pairs by passing proposition [853](https://www.mintscan.io/cosmos/proposals/853) (600,000 ATOM to strengthen the ATOM:stkATOM pool on Astroport) and proposition [858](https://www.mintscan.io/cosmos/proposals/858) (900,000 ATOM to strengthen the ATOM:stATOM pool on Osmosis).

![Covenant Figure 1](/img/blog/covenant-fig-1.png)
_Figure 1. Flow of funds for Cosmos Hub proposition 800._

The Covenant system currently supports liquid staking with Stride and Persistence, and will soon support additional liquid staking and liquid restaking protocols. If you are developing a liquid staking or liquid restaking protocol and want to integrate, [get in touch](https://x.com/ValenceZone). 

## Bilateral POL on one DEX

Two protocols may mutually wish to deepen the liquidity between their native tokens on a single DEX. To do so, they could each pass governance proposals to commit their native tokens to the deal and pair the tokens on a DEX.

This bilateral POL agreement on one DEX is what Neutron and ApolloDAO are accomplishing together with Proposition [A-33](https://governance.neutron.org/proposals/A/33). According to this deal, Neutron contributes $500K worth of its native token NTRN and ApolloDAO contributes $500K worth of its native token APOLLO to provide a total of $1M worth of liquidity support for the NTRN:APOLLO token pair on the Astroport DEX. 

![Covenant Figure 2](/img/blog/covenant-fig-2.png)
_Figure 2. Flow of funds for Neutron liquidity deal with ApolloDAO via Proposition A-33._

The Covenant system currently supports dealmaking between up to two parties at a time. The Covenant system can support deals with three or more parties by adding additional governance proposals. 

## Bilateral POL on more than one DEX

Two protocols may mutually wish to deepen the liquidity between their native tokens on two different DEXs. The desire for two DEXes often occurs when each party has a native DEX that they want to support. To do so, they could each pass governance proposals to commit their native tokens to the deal, use a fraction of the funds to pair on one DEX, and use the remaining funds to pair the other DEX.

This bilateral POL on more than one DEX is what Neutron and MantaDAO are doing together with Proposition [A-32](https://governance.neutron.org/proposals/A/32). According to this deal, Neutron contributes $150K worth of NTRN and MantaDAO contributes $150K worth of MANTA to provide $150K worth of liquidity support to the NTRN:MANTA pair on the Astroport DEX **AND** $150K worth of liquidity support to the NTRN:MANTA pair on the Kujira’s DEX FIN. 

![Covenant Figure 3](/img/blog/covenant-fig-3.png)
_Figure 3. Flow of funds for Neutron liquidity deal with MantaDAO via Proposition A-32._

The Covenant system currently supports supplying liquidity on two DEXs: Astroport (on Neutron) and Osmosis. The Covenant system can support deals with two or more DEXs by adding additional governance proposals. Covenants will soon support additional DeFi protocols, including lending protocols. If you are a member of a DeFi protocol that wants to integrate, [get in touch](https://x.com/ValenceZone). 
 
# Advanced features supported by the Covenant system

## Price fluctuation tolerance

It takes time to pass the governance propositions necessary for on-chain protocol-to-protocol liquidity deals and the price of tokens can fluctuate between the initial proposal and the final approval. The Covenant system enables protocols to set an acceptable price deviation upfront and have the deal go through so long as the price deviation is within the acceptable range. If the price deviates outside the acceptable range, the protocols would need to pass new propositions that account for the new price.

## Deposit duration

A protocol may commit to doing a deal with another protocol, but may not want the other protocol to have the option to commit to the deal at any point in the future. The Covenant system enables protocols to set a deposit duration whereby the parties have a fixed number of days to commit their portion of the capital before the deal expires. If one protocol sends its tokens in time and the other does not send its tokens in time, the protocol that sent its tokens is refunded.

## Lockup duration

The protocols involved in the deal may want a guarantee that neither protocol can withdraw their liquidity for a minimum amount of time. The Covenant system enables protocols to set minimum lockup durations to guarantee that the liquidity will remain there for that minimum amount of time. Once the duration is reached, either party may withdraw their share of the deal.

## Ragequit fee

When a minimum lockup duration is set, the parties to the deal may want to have the ability to withdraw their liquidity early in return for paying a fee. The Covenant system enables protocols to set ragequit fees whereby the ragequitting party pays a predetermined fee to the non-ragequitting party in return for the ragequitting party’s early exit.

## Liquidity ownership

When two protocols enter into a bilateral POL deal, the Covenant system enables choosing between “side-based” and “share-based” ownership. With side-based ownership, the protocol owns 100% of the token denomination it contributes and 0% of the counterparty’s token. With share-based ownership, each protocol owns a fixed percentage of the tokens it contributes, while the counterparty owns the remainder. By selecting side-based ownership, protocols can eliminate the concern that they are shorting their own token. By selecting share-based ownership, protocols can guarantee that they will bear the burden of LVR equally.

## Ownership split

One protocol may wish to be paid in return for providing liquidity to the other protocol. The Covenant system enables protocols in a bilateral POL deal to set custom ownership splits that apply regardless of whether the deal is side-based or share-based. For example, if one protocol puts in 100 USDC and the other protocol puts in $100 USD-worth of its native token in a share-based deal, the default split would be 50% each. However, the protocols could agree upon entry that the split would be 60:40 in favor of the protocol providing the USDC upon exit.

**One can expect the charging of interest on lent protocol-owned liquidity to become an increasingly common deal provision. Valence will soon have a range of facilities to enable more sophisticated loan terms.**

# Conclusion

Despite the meaningful hurdles that protocols have had to overcome to enter into deals with other protocols, protocol-to-protocol dealmaking is accelerating because the significant benefits of these deals outweigh the high costs. With the Covenant system now eliminating many of these challenges and protocol-to-protocol liquidity lending becoming increasingly popular, Valence can help protocols collaborate even more effectively with one another. If you are a member of a protocol that is interested in deepening the liquidity of your token; strengthening the DeFi activity around your token; or integrating your liquid staking, liquid restaking token, DEX, or other DeFi protocol with our product suite, send a dm to [@ValenceZone](https://x.com/ValenceZone).
